<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ofertas</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>
  <header class="Ofertas">
    <h1>Ofertas</h1>
  </header>

  <nav class="menu">
    <a href="index.html">Inicio</a>
   <a href="carrito.html" class="carrito-icono">
  <i class="bi bi-cart4"></i>
  <span id="contador-carrito">0</span>
</a>

     <!-- Men√∫ lateral con categor√≠as -->
  <button id="openMenu">‚ò∞ Departamentos</button>
  <aside id="menuLateral" class="menu-lateral">
    <button id="closeMenu" class="cerrar">‚úñ</button>
    <h3>Departamentos</h3>
    <ul>
      <li data-categoria="Linea Blanca">L√≠nea Blanca</li>
      <li data-categoria="Hogar">Hogar</li>
      <li data-categoria="Zapatos">Zapatos</li>
      <li data-categoria="Telefonos">Tel√©fonos</li>
      <li data-categoria="Belleza">Belleza</li>
      <li data-categoria="Todos">Ver Todos</li>
    </ul>
  </aside>
  </nav>
  
  <section class="catalogo">
  <div class="producto"
    data-descripcion="Tecnolog√≠a Windfree que dispersa el aire sin r√°fagas directas."
    data-color="Blanco"
    data-garantia="1 a√±o Samsung">
    <img src="https://siman.vtexassets.com/arquivos/ids/6533252-500-auto?v=638750567818030000&width=500&height=auto&aspect=true" alt="Lavadora Samsung" />
    <h4>Linea Blanca</h4>
    <h3>Aire Acondicionado Mini Split Samsung Windfree 12,000 BTU</h3>
    <p class="precio-original">$649.00</p>
    <p class="precio-descuento">$549.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="Conjunto de sala c√≥modo y moderno con acabados reclinables."
    data-color="Gris"
    data-garantia="6 meses Siman">
    <img src="https://siman.vtexassets.com/arquivos/ids/6979155-1200-auto?v=638847622851330000&width=1200&height=auto&aspect=true" alt="" />
    <h4>Hogar</h4>
    <h3>Sala 3-2-1 reclinable pu/ Roberto</h3>
    <p class="precio-original">$1,999.00</p>
    <p class="precio-descuento">$1,599.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="Zapatos deportivos casuales para uso diario con estilo."
    data-color="Blanco"
    data-garantia="3 meses">
    <img src="https://siman.vtexassets.com/arquivos/ids/5738073-1200-auto?v=638520841766370000&width=1200&height=auto&aspect=true" alt="" />
    <h4>Zapatos</h4>
    <h3>Zapato casual Everlast color blanco para mujer</h3>
    <p class="precio-original">$50</p>
    <p class="precio-descuento">$45.90</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="Alta potencia y rendimiento para los amantes de la fotograf√≠a."
    data-color="Negro"
    data-garantia="2 a√±os Samsung">
    <img src="https://siman.vtexassets.com/arquivos/ids/6690634-1200-auto?v=638773957427030000&width=1200&height=auto&aspect=true" alt="" />
    <h4>Telefonos</h4>
    <h3>Celular Samsung Galaxy S24 ultra 12GB RAM</h3>
    <p class="precio-original">$1,279.00</p>
    <p class="precio-descuento">$999.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="Perfume sofisticado y elegante para ocasiones especiales."
    data-color="Azul noche"
    data-garantia="Sin garant√≠a">
    <img src="https://siman.vtexassets.com/arquivos/ids/6614614-1200-auto?v=638760255728530000&width=1200&height=auto&aspect=true" alt="Dolce&Gabbana" />
    <h4>Belleza</h4>
    <h3>Q by Dolce&Gabbana Parfum</h3>
    <p class="precio-original">$709.00</p>
    <p class="precio-descuento">$599.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="S√©rum antiedad con col√°geno, mejora firmeza de la piel."
    data-color="Transparente"
    data-garantia="1 mes">
    <img src="https://siman.vtexassets.com/arquivos/ids/6996096-1600-auto?v=638852758550470000&width=1600&height=auto&aspect=true" alt="Liftactiv Collagen Specialist 16 Bonding Serum " />
    <h4>Belleza</h4>
    <h3>Liftactiv Collagen Specialist 16 Bonding Serum 30ml</h3>
    <p class="precio-original">$76.10</p>
    <p class="precio-descuento">$73.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>

  <div class="producto"
    data-descripcion="Lavadora de gran capacidad ideal para familias grandes."
    data-color="Blanco"
    data-garantia="1 a√±o Samsung">
    <img src="https://siman.vtexassets.com/arquivos/ids/6942571-1600-auto?v=638841257652370000&width=1600&height=auto&aspect=true" alt="Lavadora Samsung carga superior 26KG blanca" />
    <h4>Linea Blanca</h4>
    <h3>Lavadora Samsung carga superior 26KG blanca</h3>
    <p class="precio-original">$899.00</p>
    <p class="precio-descuento">$599.00</p>
    <button class="agregar-carrito">Agregar al carrito</button>
    <button class="ver-detalles">Ver detalles</button>
  </div>
</section>

<!-- DETALLE DEL PRODUCTO -->
<section id="detalle-producto" style="display: none; text-align: center; padding: 20px;">
  <img id="detalle-img" src="" alt="" style="max-width: 300px;">
  <h2 id="detalle-nombre"></h2>
  <p id="detalle-precio"></p>
  <p id="detalle-descripcion"></p>
  <p id="detalle-color"></p>
  <p id="detalle-garantia"></p>
  <button id="volver">‚Üê Volver al cat√°logo</button>
</section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
  // MEN√ö LATERAL
  const openMenuBtn = document.getElementById("openMenu");
  const menuLateral = document.getElementById("menuLateral");
  const closeMenuBtn = document.getElementById("closeMenu");

  openMenuBtn.addEventListener("click", () => {
    menuLateral.classList.add("abierto");
    openMenuBtn.style.display = "none";
  });

  closeMenuBtn.addEventListener("click", () => {
    menuLateral.classList.remove("abierto");
    openMenuBtn.style.display = "block";
  });

  // FILTRADO POR CATEGOR√çA
  const itemsMenu = document.querySelectorAll('#menuLateral li');
  const productos = document.querySelectorAll('.producto');

  itemsMenu.forEach(item => {
    item.addEventListener('click', () => {
      const categoria = item.dataset.categoria;
      productos.forEach(producto => {
        const catProd = producto.querySelector('h4').textContent.trim();
        producto.style.display = (categoria === "Todos" || catProd === categoria) ? "block" : "none";
      });
    });
  });

  // AGREGAR AL CARRITO
  function agregarAlCarrito(nombre, precio) {
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    carrito.push({ nombre, precio });
    localStorage.setItem('carrito', JSON.stringify(carrito));
    actualizarContador();
    mostrarMensaje("Producto a√±adido al carrito üõí");
  }

  // Mostrar mensaje bonito debajo del men√∫ o producto
  function mostrarMensaje(texto) {
    let msg = document.createElement("div");
    msg.textContent = texto;
    msg.className = "mensaje-carrito";
    document.body.appendChild(msg);

    setTimeout(() => {
      msg.remove();
    }, 3000);
  }

  // VINCULAR BOTONES DE TODOS LOS PRODUCTOS
  productos.forEach(producto => {
    const nombre = producto.querySelector("h3").textContent.trim();
    const precioTexto = producto.querySelector(".precio-descuento").textContent.replace('$', '').replace(',', '');
    const precio = parseFloat(precioTexto);
    const botones = producto.querySelectorAll("button");

    if (botones[0]) {
      botones[0].addEventListener("click", () => {
        agregarAlCarrito(nombre, precio);
      });
    }
  });

  // CONTADOR EN ICONO DEL CARRITO
  function actualizarContador() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const contador = document.getElementById('contador-carrito');
    if (contador) {
      contador.textContent = carrito.length;
    }
  }

  actualizarContador();

  // DETALLE DE PRODUCTO
  const botonesVerDetalles = document.querySelectorAll(".ver-detalles");
  const seccionCatalogo = document.querySelector(".catalogo");
  const seccionDetalle = document.getElementById("detalle-producto");

  const imgDetalle = document.getElementById("detalle-img");
  const nombreDetalle = document.getElementById("detalle-nombre");
  const precioDetalle = document.getElementById("detalle-precio");
  const descripcionDetalle = document.getElementById("detalle-descripcion");
  const colorDetalle = document.getElementById("detalle-color");
  const garantiaDetalle = document.getElementById("detalle-garantia");

  const volverBtn = document.getElementById("volver");

  botonesVerDetalles.forEach(boton => {
    boton.addEventListener("click", () => {
      const producto = boton.closest(".producto");

      const nombre = producto.querySelector("h3").textContent;
      const precio = producto.querySelector(".precio-descuento").textContent;
      const imagenSrc = producto.querySelector("img").src;

      const descripcion = producto.dataset.descripcion || "Sin descripci√≥n.";
      const color = producto.dataset.color || "No especificado";
      const garantia = producto.dataset.garantia || "No especificada";

      // Mostrar detalles
      imgDetalle.src = imagenSrc;
      nombreDetalle.textContent = nombre;
      precioDetalle.textContent = `Precio con descuento: ${precio}`;
      descripcionDetalle.textContent = `Descripci√≥n: ${descripcion}`;
      colorDetalle.textContent = `Color: ${color}`;
      garantiaDetalle.textContent = `Garant√≠a: ${garantia}`;

      // Ocultar cat√°logo, mostrar detalles
      seccionCatalogo.style.display = "none";
      seccionDetalle.style.display = "block";
    });
  });

  volverBtn.addEventListener("click", () => {
    seccionDetalle.style.display = "none";
    seccionCatalogo.style.display = "grid"; // O el display que uses para tu cat√°logo
  });
    // ===================== FILTRO POR B√öSQUEDA DESDE INDEX =====================
  const params = new URLSearchParams(window.location.search);
  const textoBusqueda = params.get("busqueda");

  if (textoBusqueda) {
    const textoMin = textoBusqueda.toLowerCase();
    productos.forEach(producto => {
      const nombreProd = producto.querySelector("h3").textContent.toLowerCase();
      const categoriaProd = producto.querySelector("h4").textContent.toLowerCase();
      const coincide = nombreProd.includes(textoMin) || categoriaProd.includes(textoMin);
      producto.style.display = coincide ? "block" : "none";
    });
  }
});

</script>

</body>
</html>
